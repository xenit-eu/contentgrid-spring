rootProject.name = 'contentgrid-spring-integration-tests'

includeBuild('..') {
    name = 'cg-spring-boot'
}

def springBootVersion = startParameter.getProjectProperties().get('springBootVersion')

includeBuild('./integration-tests-spring') {
    name = "dcm-api"
    if(springBootVersion) {
        it.dependencySubstitution {
            it.all { dependency ->
                if (dependency.requested instanceof ModuleComponentSelector && dependency.requested.group == "org.springframework.boot" && dependency.requested.module == "org.springframework.boot.gradle.plugin") {
                    System.out.println("${dependency.requested} -> ${springBootVersion}")
                    dependency.useTarget("${dependency.requested.moduleIdentifier}:${springBootVersion}")
                }
            }
        }
    }
}